{% extends "base.html" %}
{% load static thumbnail widget_tweaks %}

{% block title %}
Вакцины в клинике
{% endblock %}

<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

{% block content %}
{% if messages %}
<ul class="messages">
  {% for message in messages %}
  <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
  {% endfor %}
</ul>
{% endif %}
<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="accordion" id="accordionPanelsStayOpenExample">

    {% for category in category_vaccines.items %}

    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button" type="button"
                data-bs-toggle="collapse"
                data-bs-target="#panelsStayOpen-collapse{{category.0.id}}"
                aria-expanded="true"
                aria-controls="panelsStayOpen-collapse{{category.0.id}}">
          {{ category.0.name }}
        </button>
      </h2>
      <div id="panelsStayOpen-collapse{{category.0.id}}"
           class="accordion-collapse collapse">
        <div class="accordion-body">
          <ul class="list-group">

            {% for vaccine in category.1 %}

            <li class="list-group-item">
              <input type="checkbox" id="{{ vaccine.id }}"
                     name="vaccines" value="{{ vaccine.id }}"
                     {% if vaccine.id in already_checked %} checked {% endif %}>
              <label for="{{ vaccine.id }}">{{ vaccine.name }}</label>
            </li>

            {% endfor %}

          </ul>
        </div>
      </div>

      {% endfor %}

      <button type="submit" class="btn btn-primary">Сохранить</button>
    </div>
</form>

{% endblock %}
